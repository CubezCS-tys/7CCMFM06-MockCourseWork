{"backend_state":"running","connection_file":"/tmp/xdg-runtime-user/jupyter/kernel-800c2bdc-82c4-453b-9292-de721a97fa8d.json","kernel":"python3","kernel_error":"","kernel_state":"idle","kernel_usage":{"cpu":0,"memory":0},"last_backend_state":1763209095051,"last_ipynb_save":1763209130529,"metadata":{"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.12.3"}},"trust":true,"type":"settings"}
{"cell_type":"code","end":1763209100860,"exec_count":3,"id":"696e4c","input":"import pandas\nimport numpy as np\nfrom math import *\nimport coursework1lib\n\nquestion = coursework1lib.Question()\n","kernel":"python3","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"code","checksum":"e2c837740affb143f145af3877e9fbe5","grade":true,"grade_id":"696e4c","locked":true,"points":0,"schema_version":3,"solution":false,"task":false}},"pos":1,"start":1763209095074,"state":"done","type":"cell"}
{"cell_type":"code","end":1763209105257,"exec_count":4,"id":"e178cd","input":"import pandas as pd\nimport numpy as np","kernel":"python3","pos":3,"start":1763209105182,"state":"done","type":"cell"}
{"cell_type":"code","end":1763209108544,"exec_count":5,"id":"d55d9b","input":"stock_data = pd.read_csv('stock-data.csv', header=0)\nprint(stock_data.head())\n\nraw_S = stock_data[['ACME Price', 'BigBank Price']].to_numpy()\nprint(raw_S)\n\ndZ = np.diff(np.log(raw_S), axis=0)\nprint(dZ, dZ.shape)\n\nm = dZ.mean(axis=0)\nprint(m, m.shape)\n\nSigma = np.cov(dZ, rowvar=False)\nprint(Sigma, Sigma.shape)\n\n#","kernel":"python3","metadata":{"deletable":false,"nbgrader":{"cell_type":"code","checksum":"9a14c64527b8502321b68ecb964678cf","grade":false,"grade_id":"e178cd","locked":false,"schema_version":3,"solution":true,"task":false}},"output":{"0":{"name":"stdout","text":"                  Date  ACME Price  BigBank Price\n0  2000-02-25 00:00:00     372.645         92.301\n1  2000-03-03 00:00:00     380.903         93.211\n2  2000-03-10 00:00:00     381.935         91.847\n3  2000-03-17 00:00:00     334.452         98.212\n4  2000-03-24 00:00:00     323.097         92.301\n[[ 372.645   92.301]\n [ 380.903   93.211]\n [ 381.935   91.847]\n ...\n [1560.     876.   ]\n [1600.     939.   ]\n [1511.     900.   ]]\n[[ 0.02191853  0.00981076]\n [ 0.00270569 -0.01474159]\n [-0.13275707  0.06700426]\n ...\n [-0.04328051  0.03012974]\n [ 0.02531781  0.06944939]\n [-0.05723195 -0.04242072]] (733, 2)\n[0.00190982 0.00310688] (2,)\n[[0.0026227  0.00128027]\n [0.00128027 0.01071094]] (2, 2)\n"}},"pos":4,"start":1763209108254,"state":"done","type":"cell"}
{"cell_type":"code","end":1763209112379,"exec_count":6,"id":"8501d8","input":"assert m.shape==(2,)\nassert Sigma.shape==(2,2)","kernel":"python3","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"code","checksum":"36ee635c029e6ea07854aa9ae427eddf","grade":true,"grade_id":"d55d9b","locked":true,"points":0,"schema_version":3,"solution":false,"task":false}},"pos":5,"start":1763209112346,"state":"done","type":"cell"}
{"cell_type":"code","end":1763209121547,"exec_count":7,"id":"0e973e","input":"import numpy as np\n\nn_sims = 10000\nS0 = np.log(raw_S[-1, :])\nprint(S0, S0.shape)\n\ndeltaZ = np.random.multivariate_normal(mean=m, cov=Sigma, size=n_sims)\n#print(deltaZ, deltaZ.shape)\n\nsimulated_S = S0 * np.exp(deltaZ)\n\nprint(simulated_S, simulated_S.shape)","kernel":"python3","metadata":{"deletable":false,"nbgrader":{"cell_type":"code","checksum":"09aa0010aa1d6461cf35db6bd56e317a","grade":false,"grade_id":"3b6d95","locked":false,"schema_version":3,"solution":true,"task":false}},"output":{"0":{"name":"stdout","text":"[7.32052696 6.80239476] (2,)\n[[6.72126216 6.65446598]\n [7.40985246 7.15743678]\n [7.72274552 7.4742983 ]\n ...\n [7.4122855  7.01766486]\n [7.66636962 6.67375259]\n [8.02103929 7.47482361]] (10000, 2)\n"}},"pos":10,"start":1763209121252,"state":"done","type":"cell"}
{"cell_type":"code","end":1763209124881,"exec_count":8,"id":"be2cbe","input":"n_scenarios = 1000000\nn_steps = 52\nassert simulated_S.shape==(n_scenarios,2)","kernel":"python3","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"code","checksum":"e34a051292b50e9bffcc8c0b2091ecc2","grade":true,"grade_id":"0e973e","locked":true,"points":0,"schema_version":3,"solution":false,"task":false}},"output":{"0":{"ename":"AssertionError","evalue":"","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mAssertionError\u001b[0m                            Traceback (most recent call last)","\u001b[0;32m/tmp/ipykernel_412/1275645624.py\u001b[0m in \u001b[0;36m<cell line: 3>\u001b[0;34m()\u001b[0m\n\u001b[1;32m      1\u001b[0m \u001b[0mn_scenarios\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0;36m1000000\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      2\u001b[0m \u001b[0mn_steps\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0;36m52\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----> 3\u001b[0;31m \u001b[0;32massert\u001b[0m \u001b[0msimulated_S\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mshape\u001b[0m\u001b[0;34m==\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mn_scenarios\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;36m2\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m","\u001b[0;31mAssertionError\u001b[0m: "]}},"pos":11,"start":1763209124444,"state":"done","type":"cell"}
{"cell_type":"code","exec_count":0,"id":"0229aa","input":"","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"code","checksum":"003693b96a5c954a7c86a485259111bd","grade":true,"grade_id":"508eea","locked":true,"points":5,"schema_version":3,"solution":false,"task":false}},"pos":30,"type":"cell"}
{"cell_type":"code","exec_count":0,"id":"299ddc","input":"","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"code","checksum":"0e1cab3d59a9dba546d3f5ecba652d88","grade":true,"grade_id":"be2cbe","locked":true,"points":5,"schema_version":3,"solution":false,"task":false}},"pos":12,"type":"cell"}
{"cell_type":"code","exec_count":0,"id":"506175","input":"","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"code","checksum":"c04bf25cd373acfe41c7d6850aa21699","grade":true,"grade_id":"903a3f","locked":true,"points":5,"schema_version":3,"solution":false,"task":false}},"pos":7,"type":"cell"}
{"cell_type":"code","exec_count":0,"id":"508eea","input":"","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"code","checksum":"82e6d62e1e44a9784e5a39b093875862","grade":true,"grade_id":"57d4f0","locked":true,"points":5,"schema_version":3,"solution":false,"task":false}},"pos":29,"type":"cell"}
{"cell_type":"code","exec_count":0,"id":"903a3f","input":"","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"code","checksum":"9965c8bc64dd60df612d549fb4c2ef54","grade":true,"grade_id":"8501d8","locked":true,"points":5,"schema_version":3,"solution":false,"task":false}},"pos":6,"type":"cell"}
{"cell_type":"code","exec_count":0,"id":"9f8b23","input":"","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"code","checksum":"ba373a3b9ddaafbc63ce729bc933d4f3","grade":true,"grade_id":"35f4ff","locked":true,"points":4,"schema_version":3,"solution":false,"task":false}},"pos":24,"type":"cell"}
{"cell_type":"code","exec_count":0,"id":"a9580b","input":"","pos":38,"type":"cell"}
{"cell_type":"code","exec_count":0,"id":"ed9c93","input":"","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"code","checksum":"db04addc330ecc1a2f84c505df0ea594","grade":true,"grade_id":"299ddc","locked":true,"points":5,"schema_version":3,"solution":false,"task":false}},"pos":13,"type":"cell"}
{"cell_type":"code","exec_count":10,"id":"de2c04","input":"np.testing.assert_almost_equal( black_scholes_call_price( 100, 110, 0.5, 0.1, 0.2), 3.743, decimal=3)","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"code","checksum":"d56497735667a63dbd6e5a46dc9c8b3b","grade":true,"grade_id":"6c2ebf","locked":true,"points":3,"schema_version":3,"solution":false,"task":false}},"output":{"0":{"ename":"NotImplementedError","evalue":"","output_type":"error","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mNotImplementedError\u001b[0m                       Traceback (most recent call last)","\u001b[0;32m/tmp/ipykernel_518/985371138.py\u001b[0m in \u001b[0;36m<cell line: 1>\u001b[0;34m()\u001b[0m\n\u001b[0;32m----> 1\u001b[0;31m \u001b[0mnp\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mtesting\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0massert_almost_equal\u001b[0m\u001b[0;34m(\u001b[0m \u001b[0mblack_scholes_call_price\u001b[0m\u001b[0;34m(\u001b[0m \u001b[0;36m100\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;36m110\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;36m0.5\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;36m0.1\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;36m0.2\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;36m3.743\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mdecimal\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0;36m3\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m","\u001b[0;32m/tmp/ipykernel_518/2702828553.py\u001b[0m in \u001b[0;36mblack_scholes_call_price\u001b[0;34m(S0, K, T, r, sigma)\u001b[0m\n\u001b[1;32m      1\u001b[0m \u001b[0;32mdef\u001b[0m \u001b[0mblack_scholes_call_price\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mS0\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0mK\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0mT\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0mr\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0msigma\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      2\u001b[0m     \u001b[0;31m# YOUR CODE HERE\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----> 3\u001b[0;31m     \u001b[0;32mraise\u001b[0m \u001b[0mNotImplementedError\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m","\u001b[0;31mNotImplementedError\u001b[0m: "]}},"pos":18,"type":"cell"}
{"cell_type":"code","exec_count":11,"id":"78f4da","input":"def black_scholes_put_price(S0,K,T,r,sigma):\n    # YOUR CODE HERE\n    raise NotImplementedError()","metadata":{"deletable":false,"nbgrader":{"cell_type":"code","checksum":"dd2c80ebac3c6c033bd4aedccc4b5759","grade":false,"grade_id":"f24009","locked":false,"schema_version":3,"solution":true,"task":false}},"pos":20,"type":"cell"}
{"cell_type":"code","exec_count":12,"id":"1c81fe","input":"np.testing.assert_almost_equal( black_scholes_put_price( 100, 110, 0.5, 0.1, 0.2), 8.378, decimal=3)","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"code","checksum":"4baef8f2504c701a07ec6898cfde149b","grade":true,"grade_id":"78f4da","locked":true,"points":3,"schema_version":3,"solution":false,"task":false}},"output":{"0":{"ename":"NotImplementedError","evalue":"","output_type":"error","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mNotImplementedError\u001b[0m                       Traceback (most recent call last)","\u001b[0;32m/tmp/ipykernel_518/1611741468.py\u001b[0m in \u001b[0;36m<cell line: 1>\u001b[0;34m()\u001b[0m\n\u001b[0;32m----> 1\u001b[0;31m \u001b[0mnp\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mtesting\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0massert_almost_equal\u001b[0m\u001b[0;34m(\u001b[0m \u001b[0mblack_scholes_put_price\u001b[0m\u001b[0;34m(\u001b[0m \u001b[0;36m100\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;36m110\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;36m0.5\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;36m0.1\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;36m0.2\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;36m8.378\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mdecimal\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0;36m3\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m","\u001b[0;32m/tmp/ipykernel_518/2453705564.py\u001b[0m in \u001b[0;36mblack_scholes_put_price\u001b[0;34m(S0, K, T, r, sigma)\u001b[0m\n\u001b[1;32m      1\u001b[0m \u001b[0;32mdef\u001b[0m \u001b[0mblack_scholes_put_price\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mS0\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0mK\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0mT\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0mr\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0msigma\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      2\u001b[0m     \u001b[0;31m# YOUR CODE HERE\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----> 3\u001b[0;31m     \u001b[0;32mraise\u001b[0m \u001b[0mNotImplementedError\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m","\u001b[0;31mNotImplementedError\u001b[0m: "]}},"pos":21,"type":"cell"}
{"cell_type":"code","exec_count":13,"id":"35f4ff","input":"# YOUR CODE HERE\nraise NotImplementedError()","metadata":{"deletable":false,"nbgrader":{"cell_type":"code","checksum":"1792781b84e739f50a21f209ed16474f","grade":false,"grade_id":"ae8a27","locked":false,"schema_version":3,"solution":true,"task":false}},"output":{"0":{"ename":"NotImplementedError","evalue":"","output_type":"error","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mNotImplementedError\u001b[0m                       Traceback (most recent call last)","\u001b[0;32m/tmp/ipykernel_518/1067236896.py\u001b[0m in \u001b[0;36m<cell line: 2>\u001b[0;34m()\u001b[0m\n\u001b[1;32m      1\u001b[0m \u001b[0;31m# YOUR CODE HERE\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----> 2\u001b[0;31m \u001b[0;32mraise\u001b[0m \u001b[0mNotImplementedError\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m","\u001b[0;31mNotImplementedError\u001b[0m: "]}},"pos":23,"type":"cell"}
{"cell_type":"code","exec_count":14,"id":"9666d8","input":"# YOUR CODE HERE\nraise NotImplementedError()","metadata":{"deletable":false,"nbgrader":{"cell_type":"code","checksum":"caef88acdeff9884749a2b896657da01","grade":false,"grade_id":"efa3f6","locked":false,"schema_version":3,"solution":true,"task":false}},"output":{"0":{"ename":"NotImplementedError","evalue":"","output_type":"error","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mNotImplementedError\u001b[0m                       Traceback (most recent call last)","\u001b[0;32m/tmp/ipykernel_518/1067236896.py\u001b[0m in \u001b[0;36m<cell line: 2>\u001b[0;34m()\u001b[0m\n\u001b[1;32m      1\u001b[0m \u001b[0;31m# YOUR CODE HERE\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----> 2\u001b[0;31m \u001b[0;32mraise\u001b[0m \u001b[0mNotImplementedError\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m","\u001b[0;31mNotImplementedError\u001b[0m: "]}},"pos":27,"type":"cell"}
{"cell_type":"code","exec_count":15,"id":"57d4f0","input":"assert es>=var","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"code","checksum":"a4b74e866a10075d6650bafb5ba48a9c","grade":true,"grade_id":"9666d8","locked":true,"points":0,"schema_version":3,"solution":false,"task":false}},"output":{"0":{"ename":"NameError","evalue":"name 'es' is not defined","output_type":"error","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mNameError\u001b[0m                                 Traceback (most recent call last)","\u001b[0;32m/tmp/ipykernel_518/3904279417.py\u001b[0m in \u001b[0;36m<cell line: 1>\u001b[0;34m()\u001b[0m\n\u001b[0;32m----> 1\u001b[0;31m \u001b[0;32massert\u001b[0m \u001b[0mes\u001b[0m\u001b[0;34m>=\u001b[0m\u001b[0mvar\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m","\u001b[0;31mNameError\u001b[0m: name 'es' is not defined"]}},"pos":28,"type":"cell"}
{"cell_type":"code","exec_count":16,"id":"8a3d34","input":"# YOUR CODE HERE\nraise NotImplementedError()","metadata":{"deletable":false,"nbgrader":{"cell_type":"code","checksum":"081fc9f7a3a836ff555d1f636405e7ae","grade":false,"grade_id":"894c41","locked":false,"schema_version":3,"solution":true,"task":false}},"output":{"0":{"ename":"NotImplementedError","evalue":"","output_type":"error","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mNotImplementedError\u001b[0m                       Traceback (most recent call last)","\u001b[0;32m/tmp/ipykernel_518/1067236896.py\u001b[0m in \u001b[0;36m<cell line: 2>\u001b[0;34m()\u001b[0m\n\u001b[1;32m      1\u001b[0m \u001b[0;31m# YOUR CODE HERE\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----> 2\u001b[0;31m \u001b[0;32mraise\u001b[0m \u001b[0mNotImplementedError\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m","\u001b[0;31mNotImplementedError\u001b[0m: "]}},"pos":36,"type":"cell"}
{"cell_type":"code","exec_count":17,"id":"55e816","input":"if _==\"Yes\" or _==\"No\":\n    pass\nelse:\n    raise Exception('You must type either \"Yes\" or \"No\"')","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"code","checksum":"df37c89fe3c5abcc80e8a572ebea702f","grade":true,"grade_id":"8a3d34","locked":true,"points":0,"schema_version":3,"solution":false,"task":false}},"output":{"0":{"ename":"Exception","evalue":"You must type either \"Yes\" or \"No\"","output_type":"error","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mException\u001b[0m                                 Traceback (most recent call last)","\u001b[0;32m/tmp/ipykernel_518/3975466971.py\u001b[0m in \u001b[0;36m<cell line: 1>\u001b[0;34m()\u001b[0m\n\u001b[1;32m      2\u001b[0m     \u001b[0;32mpass\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      3\u001b[0m \u001b[0;32melse\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m----> 4\u001b[0;31m     \u001b[0;32mraise\u001b[0m \u001b[0mException\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m'You must type either \"Yes\" or \"No\"'\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m","\u001b[0;31mException\u001b[0m: You must type either \"Yes\" or \"No\""]}},"pos":37,"type":"cell"}
{"cell_type":"code","exec_count":8,"id":"17f544","input":"question.describe_portfolio()","output":{"0":{"data":{"text/markdown":"* 3 units of stock 1.\n* 7 European call options on stock 1 with strike 1625 and maturity 52 weeks.\n* 3 European put options on stock 2 with strike 824 and maturity 52 weeks.\n* 9 European call options on stock 2 with strike 919 and maturity 52 weeks.\n\n\nThe continuously compounded interest rate is r=0.04.","text/plain":"<IPython.core.display.Markdown object>"},"exec_count":8,"output_type":"execute_result"}},"pos":15,"type":"cell"}
{"cell_type":"code","exec_count":9,"id":"6c2ebf","input":"def black_scholes_call_price(S0,K,T,r,sigma):\n    # YOUR CODE HERE\n    raise NotImplementedError()","metadata":{"deletable":false,"nbgrader":{"cell_type":"code","checksum":"51c97fae08b20d1a763d95b5adfff47b","grade":false,"grade_id":"313b37","locked":false,"schema_version":3,"solution":true,"task":false}},"pos":17,"type":"cell"}
{"cell_type":"markdown","id":"028fd7","input":"## Historic volatility\n\nThe value $\\sqrt{52 \\, \\Sigma_{i,i}}$ is called the *historic volatility* of stock $i$. The factor of $52$ in the formula for the historic volatility is a scaling factor to take account of the fact that one usually uses units of a year in financial calculations. The square root in the formula comes from the fact that $\\Sigma_{i,i}$ is the one-week variance of stock $i$, and so its square root is the one-week standard deviation.\n\nThere are many assumptions required\nto derive the Black-Scholes price formula including assumptions on the *future* volatility of the stock. The parameter $\\sigma$ in\nthe Black-Scholes formulae represents this future volatility. In your calculation you have been told to assume that the future volatility will be equal to the historic volatility, but this is a very unrealistic assumption.\n\nThere are often\nvery good reasons to think that future volatility will be different from past volatility. For example, as I write this question there is an election looming in the United States, so one might believe that volatility of the US stock market will be high as the election approaches and will drop after the election when the outcome is known and so there is less political uncertainty. In fact, volatility is much easier to predict than whether a stock will go up or down. This is one important reason why real option prices will often be very different from those obtained using the Black-Scholes formula and historic volatility. ","pos":25,"type":"cell"}
{"cell_type":"markdown","id":"183ebc","input":"## Simulating stock prices\n\nAssume that over future weekly intervals, the changes in the log stock prices $(\\delta Z)_t$ will follow a multivariate normal distribution with\nmean $\\bm{m}$ and covariance matrix $\\Sigma$. You should assume that each week's increments are independent of each other. Write $t=0$ for the final time in the historic data so that $S_0$ give the stock prices at the final time in the historic data. Generate $10^6$ simulated stock price vectors\nprices at time $t=1$. You should store your simulation in a variable called `simulated_S` which should be a `numpy` array\nwith $10^6$ rows and 2 columns.\n\nYou must also explain mathematically how you performed this computation. You can do this by giving mathematical difference equations that show how the computation was performed together with appropriate explanatory text. Your mark will be based in part on the quality of the formatting of the mathematical formulae.","pos":8,"type":"cell"}
{"cell_type":"markdown","id":"313b37","input":"A European call option with strike $K$ and maturity $T$ on a stock is a derivative which gives a payout of $\\max\\{S_T-K,0\\}$ at the maturity, where $S_T$ is the price of the stock time $T$. A European put option with strike $K$ and maturity $T$ gives \na payout of $\\max\\{K-S_T,0\\}$ at maturity.\n\nYou should assume that the options are purchased at the *Black-Scholes price*. For a call option with strike $K$ and maturity $T$,\non a stock with price $S_0$ at time $0$, this is computed using the formula\n$$\n\\text{Call option price}=N(d_1)S_0 - Ke^{-rT}N(d_2)\n$$\nwhere\n$$\nd_1 = \\frac{1}{\\sigma \\sqrt{T}}\\left( \\log(S_0/K) + (r+\\frac{\\sigma^2}{2})T\\right)\n$$\nand\n$$\nd_2 = \\frac{1}{\\sigma \\sqrt{T}}\\left( \\log(S_0/K) + (r-\\frac{\\sigma^2}{2})T\\right).\n$$\nHere $N$ is the cumulative distribution function of the standard normal distribution,\nand $\\sigma$ is a parameter called the volatility. For stock $i$, you should assume\n$\\sigma=\\sqrt{52 \\, \\Sigma_{i,i}}$ where $\\Sigma$ is the $1$-week covariance matrix of the changes in the log\nstock price. \n\nThis formula will be explained later in the course. For now you simply need to write a Python function which can compute it. Since\nyou do not yet know the theory used to derived this formula, I have provided some tests that you can use to check your have\nimplemented this formula correctly.","pos":16,"type":"cell"}
{"cell_type":"markdown","id":"3b6d95","input":"**Solution:** *Insert your mathematical explanation here. Your mark will be based in part upon the quality of the formatting of the mathematical formulae.*","metadata":{"deletable":false,"editable":false,"nbgrader":{"cell_type":"markdown","checksum":"92e35dd037de21492d61ccdce47b83b9","grade":false,"grade_id":"183ebc","locked":true,"points":20,"schema_version":3,"solution":false,"task":true}},"pos":9,"type":"cell"}
{"cell_type":"markdown","id":"526009","input":"YOUR ANSWER HERE","metadata":{"deletable":false,"nbgrader":{"cell_type":"markdown","checksum":"15ea1bc564c9469182039a54b9bd5c2d","grade":true,"grade_id":"d53c55","locked":false,"points":20,"schema_version":3,"solution":true,"task":false}},"pos":32,"type":"cell"}
{"cell_type":"markdown","id":"632a39","input":"## Discussion\n\nWrite a short essay on the topic of risk measurement. For example you could discuss: the history and purpose of different risk measures including Value at Risk and Expected Shortfall; the relative merits of different risk alternative approaches to risk-measurement; any limitations of the calculations you have performed for this exercise. Your essay should take up at most one\npage when the notebook is formatted as a pdf. Use File->Save and Download as->PDF to view the notebook as a PDF.\n\nBe sure to do the following:\n\n* Reference scholarly works to justify any claims that you make.\n* Reference any sources you have used (for example if you have read an article on the internet, you should reference it)\n* Use your own words\n\nIt is vital to always reference your sources properly and to use your own words otherwise you may be accused of *plagiarism*.\nThis is a serious academic offence. In exams it is acceptable to use the lecturer's own words when answering a question but\nin your dissertation and in this coursework you must use your own words. You can find more information on referencing and plagiarism on Keats.\n\nI am asking you to write a short essay because you will eventually have to write a long dissertation so it is good to start\npracticing writing about mathematics. I would give the following general advice:\n\n* Try to write something *you* would enjoy reading.\n* Don't try to impress the reader with fancy words, impress them with *facts* and *mathematics*.\n* Don't say anything you don't understand yourself.\n* Say things as clearly and briefly as you can.\n* If you find it easier to say things with mathematical formulae than in English, then focus on the mathematical content.\n* Don't pad what you have to say with *waffle* just to reach the word limit or to try to look more impressive.","pos":33,"type":"cell"}
{"cell_type":"markdown","id":"7827a9","input":"# FM06 Mock Coursework\n\n## Before you begin\n\nEvery student has a slightly different assignment. To generate your personal\nassignment you should first execute every cell in this Jupyter notebook (which you can do by clicking Validate).\nYou must then answer the questions given in the notebook.\n\nThe first cell in this Notebook generates your question for you.\n\nYou must complete this assignment by editing the Jupyter notebook distributed to you in your Assignments folder on CoCalc.\n\nThe Jupyter notebook containing your work will be automatically collected after the submission deadline and this will be used to automatically mark your numerical answers.\nYour mathematical writing will also be marked, but by one of your colleagues. I will explain the mark scheme once the assignment is completed.\n\nAlthough I am calling this a \"Mock Coursework\" assignment, the question asked is somewhat shorter than the actual coursework assignment. Another difference is that, in your final coursework\nyou should not present your answer as a Jupyter notebook. Instead you will be asked to write a standalone LaTeX document. However, many of the skills I am looking for are the same\nin this assignment and your final coursework.","pos":0,"type":"cell"}
{"cell_type":"markdown","id":"894c41","input":"## Feedback\n\nYour work will be automatically marked by cocalc to answer the numerical sections so long as it is submitted on time.\n\n### Are you happy for me to discuss your solutions in the skills session?\n\nI will look at some solutions and may discuss them in a skills session without identifying whose solutions they are. Please enter the string \"Yes\" below if you are\nhappy for me to discuss your solution in the skills session. Please enter the string \"No\" otherwise.\n\n","pos":35,"type":"cell"}
{"cell_type":"markdown","id":"980172","input":"## Computing option prices\n\nAt time $0$, a trader purchases assets as described below and holds the assets for 52 weeks.\nTo purchases these assets they must borrow money at the interest rate specified below.","pos":14,"type":"cell"}
{"cell_type":"markdown","id":"ae8a27","input":"Compute the total cost of the portfolio and store the answer in a variable called `cost`","pos":22,"type":"cell"}
{"cell_type":"markdown","id":"cdae19","input":"## Reading stock price data from a file\n\nThe file `stock-data.csv` contains weekly historic stock prices for two companies *ACME* and *BigBank*. All prices are in dollars. At each historic time point $t$,\nyou can represent the stock prices as a vector ${\\mathbf S}_t$ whose first component is the price of *ACME* and whose second component\nis the price of *BigBank*. The logs of the stock prices can similarly be represented as vector $Z_t$. Let $\\delta t=\\frac{1}{52}$ be the time\ninterval of 1 week (so for the purposes of this question 1 year contains exactly 52 weeks and we are using the\nfinancial convention of using the year as our unit of time). Write $(\\delta Z)_t=Z_{t+\\delta t}-Z_t$.\n\nRead the file `stock-data.csv` into Python and use this to do the following:\n\n* Create a matrix called `dZ` with $N-1$ rows and $2$ columns containing all the weekly changes in the log stock price. Here $N$ is the number of weeks in the sample.\n* The sample average value of the vector $(\\delta Z)_t$. Store the value as a `numpy` 2-vector in a variable `m`. We will refer to this vector in the mathematics below as $\\bm{m}$.\n* The sample covariance matrix for the change $(\\delta Z)_t$. Store the value as a `numpy` array in a variable `Sigma`. We will refer to this matrix in the mathematics below as $\\Sigma$.\n\nWe have not seen how to read a `csv` file in the course. You can do this using `pandas.read_csv`, or you can use Excel to save the file in the Excel format that we have seen how to read, or you can use the Python library `csv`, or you could use some other approach. It is entirely up to you.","pos":2,"type":"cell"}
{"cell_type":"markdown","id":"d3c7f0","input":"YOUR ANSWER HERE","metadata":{"deletable":false,"nbgrader":{"cell_type":"markdown","checksum":"4efe1a42122ff0f50345dc1ddeb00a5e","grade":true,"grade_id":"632a39","locked":false,"points":20,"schema_version":3,"solution":true,"task":false}},"pos":34,"type":"cell"}
{"cell_type":"markdown","id":"d53c55","input":"## Testing your code\n\nYour code will be tested automatically as part of the marking process. However, you should write your own tests and explain how they work.\nThe better your tests, the higher your mark will be. For each test that you write, provide a mathematical description of the test as well\nas the code that performs the test.","pos":31,"type":"cell"}
{"cell_type":"markdown","id":"efa3f6","input":"## Compute the Value at Risk and Expected Shortfall\n\nAfter $1$ year, the trader liquidates their portfolio and pays of their debt with interest. Compute the\n$95$-th percentile of the loss distribution.\nThis gives an estimate of a risk-figure which is called the 52 week, $5\\%$ *Value at Risk*\nof the portfolio. Store your answer in a variable called `var`.\n\nCompute the average value of the loss in all the scenarios where the loss was greater than the Value at Risk.\nThis gives an estimate of another risk-figure which called the 52 week, %5\\$ *Expected Shortfall* of the portfolio.\nStore your answer in a variable called `es`.\n\nValue at Risk and Expected Shortfall figures are often used in the industry and can be computed over a variety of time-horizons\nand at different percentage levels.","pos":26,"type":"cell"}
{"cell_type":"markdown","id":"f24009","input":"The Black-Scholes price formula for a European put option with strike $K$ and maturity $T$ is\n$$\ne^{-rT} K N(-d_2) - N(-d_1) S_0\n$$\nWrite a function to compute this.","pos":19,"type":"cell"}
{"id":0,"time":1763208990446,"type":"user"}
{"last_load":1763209011641,"type":"file"}